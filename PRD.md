# **Project Requirements Document: Crime Prediction Model**

The following table outlines the detailed functional requirements of the Crime Prediction Model system.

| Requirement ID | Description                              | User Story                                                                                                  | Expected Behavior/Outcome                                                                                                     |
|----------------|------------------------------------------|-------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| FR001          | Data Ingestion                           | As a developer, I want to ingest raw crime and police patrol data so it can be preprocessed and analyzed.  | The system should support loading CSV/JSON files from local and remote sources (e.g., open data APIs).                        |
| FR002          | Spatial Grid Creation                    | As a developer, I want to divide Medellín into a grid so crime can be analyzed by geographic units.         | The system should generate H3 hexagons (resolution 9) covering the Medellín area using the `h3` library.                      |
| FR003          | Crime Data Aggregation                   | As a data scientist, I want to aggregate crimes per grid cell so I can identify high-risk areas.            | The system should count incidents per H3 cell and enrich them with temporal and categorical features.                         |
| FR004          | Feature Engineering                      | As a data scientist, I want to engineer meaningful features from crime and patrol data for model training.   | The system should include spatial, temporal, and categorical features (e.g., crime type, time of day, neighborhood).          |
| FR005          | Crime Risk Model Training                | As a data scientist, I want to train a machine learning model to predict crime risk per grid cell.          | The system should support training using Scikit-learn, TensorFlow, or PyTorch with reproducible scripts.                      |
| FR006          | Model Evaluation and Metrics             | As a data scientist, I want to evaluate the model using metrics like F1 score or ROC-AUC to measure quality. | The system should output performance reports and confusion matrices for interpretation.                                       |
| FR007          | API Integration                          | As a backend developer, I want to expose model predictions via a Flask API so they can be used by the frontend. | The API should receive location and time data and return a crime risk score or category.                                      |
| FR008          | Interactive Map Visualization            | As a user, I want to view crime risk levels on a map so I can understand geographic patterns of crime.       | The system should display a color-coded hex grid overlay on a map using Google Maps JS API or Leaflet.                       |
| FR009          | Route Optimization for Police Patrols    | As a user, I want the app to suggest optimized patrol routes based on predicted high-risk areas.            | The system should integrate the Google Maps Directions API to create efficient patrol routes prioritizing high-risk hexes.    |
| FR010          | Model Deployment                         | As a devops engineer, I want to deploy the app so it’s accessible via a public URL.                         | The system should support deployment on AWS (EC2, RDS, etc.) using Flask and PostgreSQL.                                      |
| FR011          | Data Update Pipeline                     | As a data engineer, I want to regularly update data so the model remains accurate over time.                 | The system should include a scheduled pipeline (e.g., via cron or Airflow) to fetch and process new crime reports.            |
| FR012          | GitHub Collaboration and Dev Workflow    | As a team member, I want clear setup instructions and modular code so I can contribute easily.               | The repository should include a `README.md`, `requirements.txt`, `.env.example`, and use branching for feature development.   |
| FR013          | Environment Setup and Reproducibility    | As a contributor, I want to run the project with minimal configuration.                                     | The repo should support local and Codespaces-based setup using Conda or virtualenv, with a single environment file.           |
| FR014          | Logging and Error Handling               | As a developer, I want to log issues and handle errors gracefully so I can debug and improve the app.        | The system should log API requests, model errors, and system warnings to a file or cloud logging service.                     |
| FR015          | CRISP-DM Methodology                     | As a data scientist, I want to follow the CRISP-DM methodology to structure the data science process.       | The system should document and implement all CRISP-DM phases: Business Understanding, Data Understanding, Data Preparation, Modeling, Evaluation, and Deployment. |
| FR016          | Advanced Predictive Modeling Workflow    | As a data scientist, I want to apply a complete ML workflow for high-quality model selection.               | The model training pipeline should: <ul><li>Balance only 70% of the data (if needed)</li><li>Perform cross-validation on the 70%</li><li>Train 4 supervised ML models</li><li>Train 3 ensemble models</li><li>Calculate and interpret at least 4 metrics per model (e.g., accuracy, F1, ROC-AUC, precision)</li><li>Select the top 3 models via ANOVA + Tukey HSD test</li></ul> |
| FR017          | Model Optimization and Deployment Pipeline | As a data scientist, I want to hyperparameter-tune and store the best model for deployment.                  | The top 3 models should undergo hyperparameter optimization using GridSearch and genetic or Bayesian optimization. The best model should be stored in a pipeline with data prep steps and deployed via a GUI interface. |
